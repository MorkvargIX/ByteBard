{% extends "blog/base.html" %}
{% load blog_tags %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <div class="post-detail-wrapper rounded">
        <h1>{{ post.title }}</h1>
        <p class="date">Published {{ post.publish }} by {{ post.author }}</p>
        {{ post.body|markdown }}

        <div class="post-tags">
            <h4>Tags: </h4>
            {% if post.tags.all %}
                {% for tag in post.tags.all %}
                    <p>{{ tag|title }}</p>
                {% endfor %}
            {% else %}
                <p>No tags</p>
            {% endif %}
        </div>

        {% include "blog/post/includes/post_info.html" %}
    </div>

    <div class="post-comments rounded">
        {% for comment in comments %}
            <div class="comment-info">
                <img src="{% static 'img/standard_user_icon.png' %}" alt="#user_icon" width="30px" height="30px">
                <div class="comment-info-elements person-info">
                    <p class="person-info-element">{{ comment.name }}</p>
                    <p class="person-info-element comment-publish">{% if comment.updated %} {{ comment.updated }} updated {% else %} {{ comment.created }} created {% endif %}</p>
                </div>
            </div>
            <p>{{ comment.body }}</p>
            <hr>
        {% endfor %}
        {% if request.user.is_authenticated %}
            <form method="post" class="comment-form">
            {% csrf_token %}
            <textarea class="rounded" name="body" placeholder="Write comment" required></textarea>
            <button type="submit">Add Comment</button>
        {% else %}
            {% if comments.count == 0 %}
                <p class="comment-register-text"> This post has no comments yet. You can be the first! </p>
            {% endif %}
            <p class="comment-register-text">To leave a comment, please register</p>
        {% endif %}
    </form>
    </form>
    </div>

{% endblock %}