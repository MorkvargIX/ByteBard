{% extends "blog/base.html" %}
{% load blog_tags %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <div class="post-detail-wrapper rounded">
        <h1>{{ post.title }}</h1>
        <p class="date">Published {{ post.publish }} by {{ post.author }}</p>
        {{ post.body|markdown }}

        <div class="post-tags">
            <h4>Tags: </h4>
            {% if post.tags.all %}
                {% for tag in post.tags.all %}
                    <p>{{ tag|title }}</p>
                {% endfor %}
            {% else %}
                <p>No tags</p>
            {% endif %}
        </div>

        <div class="annotate-post">
            <h4>Similar posts: </h4>
            {% for post in similar_posts|slice:':4' %}
                <p>
                    <a href="{{ post.get_absolute_url }}" style="text-decoration: none;">{{ post.title|truncate_words:4 }}</a>
                </p>
            {% empty %}
                <p>There are no similar posts yet.</p>
            {% endfor %}
        </div>
        <ul class="post-statistic post-statistic-element">
          {% with comments.count as total_comments %}
            <li class="statistic-element"><img src="{% static 'logo/comment.svg' %}" alt="#comment" width="20" height="20">: {{ total_comments }}</li>
          {% endwith %}
          <li class="statistic-element"><img src="{% static 'logo/like.svg' %}" alt="#comment" width="20" height="20">: 0</li>
          <li class="statistic-element"><img src="{% static 'logo/dislike.svg' %}" alt="#comment" width="20" height="20">: 0</li>
          <li class="statistic-element"><a href="{% url 'blog:post_share' post.id %}" style="text-decoration: none;"><img src="{% static 'img/share.svg' %}" alt="#share" width="20" height="20"></a></li>
        </ul>
    </div>

    <div class="post-comments rounded">
        {% for comment in comments %}
        <div class="comment-info">
            <img src="{% static 'img/standard_user_icon.png' %}" alt="#user_icon" width="30px" height="30px">
            <div class="comment-info-elements person-info">
                <p class="person-info-element">{{ comment.name }}</p>
                <p class="person-info-element comment-publish">{% if comment.updated %} {{ comment.updated }} updated {% else %} {{ comment.created }} created {% endif %}</p>
            </div>
        </div>
        <p>{{ comment.body }}</p>
        <hr>
        {% endfor %}
        <form method="post" class="comment-form">
        {% csrf_token %}
        <textarea class="rounded" name="body" placeholder="Write comment" required></textarea>
        <button type="submit">Add Comment</button>
    </form>
    </form>
    </div>

{% endblock %}